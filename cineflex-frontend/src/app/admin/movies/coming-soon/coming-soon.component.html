<div class="p-5">
    <!-- Top utilities bar -->
    <div class="flex justify-between">
        <h3 class="text-xl font-bold text-primary">Coming Soon Movies</h3>
        <button (click)="isAddModalOpen = !isAddModalOpen" class="block px-3 py-2 bg-primary rounded-md group hover:bg-white duration-200 focus:outline-none border-2 border-solid border-primary">
            <i class="fa fa-plus text-xs text-white group-hover:text-primary duration-200"></i>
            <span class="font-bold text-white group-hover:text-primary duration-200"> Add Movie</span>
        </button>
    </div>

    <!-- Main section content -->
    <div class="rounded-lg bg-white w-full h-full mt-5 p-6">
        <!-- Search bar -->
        <div class="relative">
            <!-- Search input -->
            <div>
                <input type="text" class="bg-gray-200 p-2 pl-10 rounded-md w-1/2 focus:outline-none font-semibold text-gray-700" placeholder="Search By Name" #searchInput>
                <i class="fa fa-search absolute left-0 ml-3 mt-3 text-lg cursor-pointer text-gray-800 hover:text-primary duration-200"></i>
            </div>  
            <!-- Search results -->
            <div class="absolute bg-white border rounded-lg left-0 w-1/2 p-4 mt-3" *ngIf="searchInput.value !== ''" [@modalOpenAnimation]>
                <div class="border-b-2 py-2">Your results for <strong>{{ searchInput.value}}</strong></div>

                <!-- Searching spinner -->
                <div class="loadingio-spinner-spin-blut0vicmi8" *ngIf="isSearching"><div class="ldio-al5e038e2l">
                <div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div>
                </div></div>

                <!-- Found categories -->
                <!-- <div *ngIf="!isSearching" class="mt-5">
                    <div *ngFor="let result of searchResults">
                        <span class="font-bold">ID: </span>
                        <span>{{ result.id }}</span>
                        <span class="font-bold"> | Name: </span>
                        <span>{{ result.name }}</span>
                    </div>
                </div> -->
                
                <!-- Not found notification -->
                <div *ngIf="searchResults && searchResults.length === 0 && !isSearching" class="mt-5">No matching results</div>
            </div>
        </div>

        <!-- Category Table -->
        <div class="mt-8">
            <table class="table-fixed w-full">
                <thead class="border-b-2">
                    <tr>
                        <th class="text-primary py-2 w-1/12">ID</th>
                        <th class="text-primary">TMDB ID</th>
                        <th class="text-primary">Title</th>
                        <th class="text-primary">Poster Link</th>
                        <th class="text-primary">Backdrop Link</th>
                        <th class="text-primary">Movie Type</th>
                        <th class="text-primary">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="border-b-2" *ngFor="let movie of movies; let i = index">
                        <th class="text-gray-800 py-4 font-semibold">{{ movie.id }}</th>
                        <th class="text-gray-800 py-4 font-semibold">{{ movie.tmdbId }}</th>
                        <th class="text-gray-800 py-4 font-semibold">{{ movie.title }}</th>
                        <th class="text-gray-800 py-4 font-semibold"><img class="h-24 mx-auto" src="{{movie.posterLink}}" alt=""></th>
                        <th class="text-gray-800 py-4 font-semibold"><img class="h-24 mx-auto" src="{{movie.backdropLink}}" alt=""></th>
                        <th class="text-gray-800 py-4 font-semibold">{{ movie.movieType }}</th>
                        <th class="text-gray-800 py-4">
                            <i (click)="this.isUpdateModalOpen = !isUpdateModalOpen; selectedMovie = movies[i];" class="fa fa-pencil-alt bg-green-200 rounded-md text-green-500 text-lg p-3 inline-block mr-5 cursor-pointer hover:text-green-200 hover:bg-green-500 duration-200"></i>
                            <i (click)="this.isDeleteModalOpen = !isDeleteModalOpen; selectedMovie = movies[i]" class="fa fa-trash-alt bg-red-200 rounded-md text-red-500 text-lg p-3 cursor-pointer hover:text-red-200 hover:bg-red-500 duration-200"></i>
                        </th>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Gray backdrop for modal -->
        <div class="fixed inset-0 w-screen h-screen bg-gray-500 opacity-50 z-10" *ngIf="isUpdateModalOpen || isAddModalOpen || isDeleteModalOpen" [@backdropOpenAnimation]>
        </div>

        <!-- Update Movie modal content -->
        <div class="w-full max-w-3xl bg-white rounded-lg z-20 top-0 mt-24" id="updateMovieModal" *ngIf="isUpdateModalOpen" [@modalOpenAnimation]>
            <h3 class="font-bold text-primary text-xl text-center mt-3">Edit Your Movie</h3>

            <form class="mt-10 flex flex-wrap justify-center" [formGroup]="updateMovieForm" (ngSubmit)="updateMovie()">
                <div class="mb-8 p-5 h-24">
                    <label for="movieId" class="font-semibold mb-2 block text-center">ID</label>
                    <input id="movieId" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="id" [(ngModel)]="selectedMovie.id">
                </div>

                <div class="mb-8 p-5 h-24">
                    <label for="tmdbId" class="font-semibold mb-2 block text-center">TMDB ID</label>
                    <input id="tmdbId" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="tmdbId" [(ngModel)]="selectedMovie.tmdbId">
                    <span class="text-red-600 text-sm font-semibold block" *ngIf="!updateMovieForm.get('tmdbId').valid && updateMovieForm.get('tmdbId').touched">*TMDB ID is required</span>
                </div>

                <div class="mb-8 p-5 h-24">
                    <label for="movieTitle" class="font-semibold mb-2 block text-center">Title</label>
                    <input id="movieTitle" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="title" [(ngModel)]="selectedMovie.title">
                    <span class="text-red-600 text-sm font-semibold block" *ngIf="!updateMovieForm.get('title').valid && updateMovieForm.get('title').touched">*Title is required</span>
                </div>

                <div class="mb-8 p-5 h-24">
                    <label for="movieRating" class="font-semibold mb-2 block text-center">Rating</label>
                    <input id="movieRating" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="rating" [(ngModel)]="selectedMovie.rating">
                    <span class="text-red-600 text-sm font-semibold block" *ngIf="!updateMovieForm.get('rating').valid && updateMovieForm.get('rating').touched">*Rating is required</span>
                </div>

                <div class="mb-8 p-5 h-24">
                    <label for="posterLink" class="font-semibold mb-2 block text-center">Poster Link</label>
                    <input id="posterLink" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="posterLink" [(ngModel)]="selectedMovie.posterLink">
                    <span class="text-red-600 text-sm font-semibold block" *ngIf="!updateMovieForm.get('posterLink').valid && updateMovieForm.get('posterLink').touched">*Poster Link is required</span>
                </div>

                <div class="mb-8 p-5 h-24">
                    <label for="backdropLink" class="font-semibold mb-2 block text-center">Backdrop Link</label>
                    <input id="backdropLink" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="backdropLink" [(ngModel)]="selectedMovie.backdropLink">
                    <span class="text-red-600 text-sm font-semibold block" *ngIf="!updateMovieForm.get('backdropLink').valid && updateMovieForm.get('backdropLink').touched">*Backdrop Link is required</span>
                </div>

                <div class="mb-8 p-5 h-24">
                    <label for="movieType" class="font-semibold mb-2 block text-center">Movie Type</label>
                    <input id="movieType" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="movieType" [(ngModel)]="selectedMovie.movieType">
                </div>

                <div class="mb-8 p-5 h-24">
                    <label for="filmLink" class="font-semibold mb-2 block text-center">Film Link</label>
                    <input id="filmLink" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="filmLink" [(ngModel)]="selectedMovie.filmLink">
                </div>

                <div class="bg-gray-200 rounded-b-lg p-3 text-right flex-auto min-w-full">
                    <a (click)="isUpdateModalOpen = !isUpdateModalOpen; getAllComingMovies()" class="inline-block px-3 py-2 mr-2 font-semibold text-white bg-red-500 rounded-lg cursor-pointer border-2 border-red-500 hover:bg-white hover:text-red-500 duration-200">Cancel</a>
                    <button type="submit">
                        <a class="inline-block px-3 py-2 font-semibold text-white bg-green-500 rounded-lg cursor-pointer border-2 border-green-500 hover:bg-white hover:text-green-500 duration-200">Update</a>
                    </button>
                </div>
            </form>
        </div>

        <!-- Add Category modal content -->
        <div class="w-full max-w-3xl bg-white rounded-lg z-20 -mt-10" id="addMovieModal" *ngIf="isAddModalOpen" [@modalOpenAnimation]>
            <h3 class="font-bold text-primary text-xl text-center mt-3">Add Your Movie</h3>

            <form class="mt-10" [formGroup]="addMovieForm" (ngSubmit)="addMovie()">
                <div class="mb-12 px-5">
                    <label for="categoryId" class="font-semibold mb-2 block text-center">Category Name</label>
                    <input type="text" class="p-2 bg-gray-300 block mx-auto focus:outline-none focus:shadow-outline rounded-md" formControlName="name">
                </div>

                <div class="bg-gray-200 rounded-b-lg p-3 text-right">
                    <a (click)="isAddModalOpen = !isAddModalOpen" class="inline-block px-3 py-2 mr-2 font-semibold text-white bg-red-500 rounded-lg cursor-pointer border-2 border-red-500 hover:bg-white hover:text-red-500 duration-200">Cancel</a>
                    <button type="submit">
                        <a class="inline-block px-3 py-2 font-semibold text-white bg-green-500 rounded-lg cursor-pointer border-2 border-green-500 hover:bg-white hover:text-green-500 duration-200">Add Category</a>
                    </button>
                </div>
            </form>
        </div>

        <!-- Delete Category modal content -->
        <div class="w-full max-w-lg bg-white rounded-lg z-20 top-0 mt-24" id="deleteMovieModal" *ngIf="isDeleteModalOpen" [@modalOpenAnimation]>
            <h3 class="font-bold text-primary text-xl text-center mt-3">Delete Your Movie</h3>
            <p class="p-5 font-semibold text-primary text-center">Are you sure you want to delete the movie with information below ?</p>

            <form class="mt-10 flex flex-wrap justify-center" [formGroup]="deleteMovieForm" (ngSubmit)="deleteMovie()">
                <div class="mb-8 p-5 h-24">
                    <label for="movieId" class="font-semibold mb-2 block text-center">ID</label>
                    <input id="movieId" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="id" [(ngModel)]="selectedMovie.id">
                </div>

                <div class="mb-8 p-5 h-24">
                    <label for="tmdbId" class="font-semibold mb-2 block text-center">TMDB ID</label>
                    <input id="tmdbId" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="tmdbId" [(ngModel)]="selectedMovie.tmdbId">
                    <span class="text-red-600 text-sm font-semibold block" *ngIf="!updateMovieForm.get('tmdbId').valid && updateMovieForm.get('tmdbId').touched">*TMDB ID is required</span>
                </div>

                <div class="mb-8 p-5 h-24">
                    <label for="movieTitle" class="font-semibold mb-2 block text-center">Title</label>
                    <input id="movieTitle" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="title" [(ngModel)]="selectedMovie.title">
                    <span class="text-red-600 text-sm font-semibold block" *ngIf="!updateMovieForm.get('title').valid && updateMovieForm.get('title').touched">*Title is required</span>
                </div>

                <div class="mb-8 p-5 h-24">
                    <label for="movieRating" class="font-semibold mb-2 block text-center">Rating</label>
                    <input id="movieRating" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="rating" [(ngModel)]="selectedMovie.rating">
                    <span class="text-red-600 text-sm font-semibold block" *ngIf="!updateMovieForm.get('rating').valid && updateMovieForm.get('rating').touched">*Rating is required</span>
                </div>

                <div class="mb-8 p-5 h-24">
                    <label for="posterLink" class="font-semibold mb-2 block text-center">Poster Link</label>
                    <input id="posterLink" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="posterLink" [(ngModel)]="selectedMovie.posterLink">
                    <span class="text-red-600 text-sm font-semibold block" *ngIf="!updateMovieForm.get('posterLink').valid && updateMovieForm.get('posterLink').touched">*Poster Link is required</span>
                </div>

                <div class="mb-8 p-5 h-24">
                    <label for="backdropLink" class="font-semibold mb-2 block text-center">Backdrop Link</label>
                    <input id="backdropLink" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="backdropLink" [(ngModel)]="selectedMovie.backdropLink">
                    <span class="text-red-600 text-sm font-semibold block" *ngIf="!updateMovieForm.get('backdropLink').valid && updateMovieForm.get('backdropLink').touched">*Backdrop Link is required</span>
                </div>

                <div class="mb-8 p-5 h-24">
                    <label for="movieType" class="font-semibold mb-2 block text-center">Movie Type</label>
                    <input id="movieType" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="movieType" [(ngModel)]="selectedMovie.movieType">
                </div>

                <div class="mb-8 p-5 h-24">
                    <label for="filmLink" class="font-semibold mb-2 block text-center">Film Link</label>
                    <input id="filmLink" type="text" class="p-2 bg-gray-300 block mx-auto rounded-md focus:outline-none focus:shadow-outline" formControlName="filmLink" [(ngModel)]="selectedMovie.filmLink">
                </div>

                <div class="bg-gray-200 rounded-b-lg p-3 text-right flex-auto min-w-full">
                    <a (click)="isDeleteModalOpen = !isDeleteModalOpen; getAllComingMovies()" class="inline-block px-3 py-2 mr-2 font-semibold text-white bg-red-500 rounded-lg cursor-pointer border-2 border-red-500 hover:bg-white hover:text-red-500 duration-200">Cancel</a>
                    <button type="submit">
                        <a class="inline-block px-3 py-2 font-semibold text-white bg-green-500 rounded-lg cursor-pointer border-2 border-green-500 hover:bg-white hover:text-green-500 duration-200">Yes, I Confirm</a>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>